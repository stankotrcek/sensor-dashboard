{% extends 'base.html' %}

{% block content %}
<div class="container mx-auto px-4 py-4 max-w-7xl">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4">
        <h1 class="text-3xl sm:text-4xl font-bold ">
            Links
        </h1>
        <div class="flex items-center gap-2">
            <div class="loading loading-ring loading-sm text-success" id="connection-indicator"></div>
            <span class="text-sm text-base-content/70" id="connection-status">Connecting...</span>
        </div>
    </div>

    <!-- Main Grid -->
    <div class="flex flex-col gap-4 mb-6">

        <!-- table -->
        <div>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div class="overflow-x-auto">
                    <div id="example-table"></div>
                </div>
            </div>
        </div>

    </div>

    <script>

        // Initialize Tabulator
        var table = new Tabulator("#example-table", {
            ajaxURL: "http://localhost:8000/links-data", //ajax URL
            columns: [
                {
                    title: "URL", field: "url", width: 250, formatter: "link", formatterParams: {
                        labelField: "name",
                        target: "_blank",
                    }
                },
            ]
        });

    </script>
    {% endblock %}